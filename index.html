<!DOCTYPE html>
<html lang="en">
<head>
    <style type="text/css">
        #centralizar{
    position:absolute; 
    top:50%;
    left:50%;
    transform: translate(-50%, -50%);
        }

    .botao{
    border: solid 1px blue;
    border-radius: 20px;
    color: #ffffff;
    background-color: #3333ff;
    transition: background-color 0.5s ease, color 0.5s ease, transform 0.5s ease;
    }
    .botao:hover{
    background-color: blue;
    color: white;
    transform: scale(1.1)
    }

    #agendar{ 
    top:-17%;
    left:-10%;
    transform: translate(+17%, +10%);
        }

    #verReserva{
    top:+12%;
    left:-10%;
    transform: translate(-12%, +10%);
        }    

    #editarReserva{ 
    top:+4%;
    left:-10%;
    transform: translate(-4%, +10%);
        }

    #excluirReserva{ 
    top:+2%;
    left:-20%;
    transform: translate(-2%, +20%);
        } 

    </style>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="index.js"></script>
    
</head>
<body>
    

    <div id="centralizar">
    <button onclick="cadastro()", class ="botao"> cadastrar sala</button>
    <div>
    <script>
        //cadastro de salas
        var reservasAgendadas;
        var numeroSala
function cadastro(salaNum, salaDescricao){
    var salaNum = Number(prompt("Informe o número da sua sala"));
    var salaDescricao = prompt("informe uma descrição para sua sala");
    var guardarSala = [salaNum, salaDescricao];

    // Verifica se há um array armazenado no localStorage
var items = localStorage.getItem("items");

// Se não houver um array armazenado, inicializa-o como um array vazio
if (!items) {
    items = [];
} else {
    // Se houver um array armazenado, converte-o de volta para um array JavaScript
    items = JSON.parse(items);
}

// Adiciona um novo item ao array
items.push(guardarSala);

// Salva o array atualizado de volta no localStorage
localStorage.setItem("items", JSON.stringify(items));
console.log(items)

    console.log(guardarSala)
        return guardarSala
       }
       
    
    // Função para agendar uma reserva
function agendarReserva(numeroSala, data, hora) {
var numeroSala = prompt('Qual o NÚMERO da sua SALA ?');
var data = prompt('Qual a DATA que você deseja reservar ?');
var hora = prompt('Qual a HORA que você deseja reservar ?');
// Verificar se a sala está disponível no horário desejado
if (verificarDisponibilidade(numeroSala, data, hora)) {
   // Criar um objeto reserva
   var reserva = {
       sala: numeroSala,
       data: data,
       hora: hora
   };
   return reserva

   // Armazenar a reserva na sessão do navegador
    reservasAgendadas = JSON.parse(sessionStorage.getItem('reservas')) || [];
   reservasAgendadas.push(reserva);
   sessionStorage.setItem('reservas', JSON.stringify(reservasAgendadas));

   console.log('Reserva agendada com sucesso:', reserva);
   return true;
} else {
   console.log('Desculpe, a sala não está disponível neste horário.');
   return false;
}
}


// Função para verificar a disponibilidade da sala
function verificarDisponibilidade(numeroSala, data, hora) {
// Aqui você pode implementar a lógica para verificar se a sala está disponível na data e hora especificadas
// Por exemplo, você pode consultar um banco de dados ou outra fonte de dados para verificar reservas existentes

// Neste exemplo simples, vamos supor que a sala está sempre disponível
return true;
}
function objetoParaString(objeto) {
    // Verifica se o objeto é um array
    if (Array.isArray(objeto)) {
        // Se for um array, mapeia cada elemento e chama recursivamente a função
        const arrayStrings = objeto.map(item => objetoParaString(item));
        // Retorna a representação do array como uma string
        return `[${arrayStrings.join(', ')}]`;
    }

    // Verifica se o objeto é um objeto literal
    if (typeof objeto === 'object' && objeto !== null) {
        // Mapeia as chaves e valores do objeto e chama recursivamente a função
        const objetoStrings = Object.entries(objeto).map(([chave, valor]) => `${chave}: ${objetoParaString(valor)}`);
        // Retorna a representação do objeto como uma string
        return `{${objetoStrings.join(', ')}}`;
    }

    // Se não for um array nem um objeto, retorna o valor como está
    return objeto.toString();
}

// Função para gerenciar agendamentos
function gerenciarAgendamentos() {
  // Função para editar um agendamento

    var numeroSala = prompt("Informe o número da reserva que deseja editar:");
    if (reservas[numeroSala]) {
      var novaSala = prompt("Informe o novo número da sala (deixe em branco para não alterar):");
      var novaData = prompt("Informe a nova data da reserva (formato DD/MM/AAAA, deixe em branco para não alterar):");
      var novaHora = prompt("Informe a nova hora da reserva (formato HH:MM, deixe em branco para não alterar):");
  
      // Atualiza somente os campos que o usuário deseja alterar
      reservas[numeroSala].numeroSala = novaSala || reservas[numeroSala].numeroSala;
      reservas[numeroSala].data = novaData || reservas[numeroSala].data;
      reservas[numeroSala].hora = novaHora || reservas[numeroSala].hora;
  
      sessionStorage.setItem('reservas', JSON.stringify(reservas));
      alert("Agendamento editado com sucesso!");
    } else {
      alert("Agendamento não encontrado.");
    }
}
  
  /// Função para excluir um agendamento
function excluirAgendamento(idreserva) {
    // Encontra o índice do agendamento com o ID fornecido
    const index = listaDeAgendamentos.findIndex(agendamento => agendamento.id === id);
    
    // Se encontrou o agendamento com o ID fornecido, exclui-o
    if (index !== -1) {
        listaDeAgendamentos.splice(index, 1);
        console.log(`Agendamento com ID ${id} excluído com sucesso.`);
    } else {
        console.log(`Agendamento com ID ${id} não encontrado.`);
    }
}


  var salasReservadas =  [
    {"sala": 1, "data": "02-01-2024", "hora": "09:00 - 10:30"},

    {"sala": 3, "data": "06-03-2024", "hora": "12:00 - 13:30"},

    {"sala": 5, "data": "09-05-2024", "hora": "15:00 - 16:00"},

    {"sala": 7, "data": "20-06-2024", "hora": "08:00 - 09:00"},

    {"sala": 9, "data": "15-04-2024", "hora": "06:00 - 07:00"},

    {"sala": 11, "data": "08-10-2024", "hora": "17:00 - 18:30"}, 

    {"sala": 13, "data": "10-12-2024", "hora": "21:00 - 22:30"},

    {"sala": 15, "data": "25-08-2024", "hora": "11:00 - 12:30"},

    {"sala": 17, "data": "29-07-2024", "hora": "20:00 - 21:30"},

    {"sala": 19, "data": "11-06-2024", "hora": "22:00 - 23:30"},
  
   ];
    console.log(salasReservadas)
    </script>

<div id="agendar">
    <button onclick="agendarReserva()", class ="botao"> agendar</button>
    <div>

<div id="verReserva">
    <button onclick="alert(`${objetoParaString(reservasAgendadas)}`)", class ="botao"> ver reservas</button>
    <div>

<div id="editarReserva">
    <button onclick="gerenciarAgendamentos()", class ="botao"> editar reserva</button>
    <div>

<div id="excluirReserva">
    <button onclick="excluirAgendamento()", class ="botao"> excluir reserva</button>
    <div>      
</body>
</html>
